<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Multiscale Model &#8212; gana 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Diet Problem" href="diet.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="Multiscale-Model">
<h1>Multiscale Model<a class="headerlink" href="#Multiscale-Model" title="Link to this heading"></a></h1>
<p>The primary motivation behind developing gana was to be able to write multiscale models seamlessly.</p>
<p>Here is how you write one</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;../../src&#39;</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">gana</span><span class="w"> </span><span class="kn">import</span> <span class="n">Prg</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">inf</span>
</pre></div>
</div>
</div>
<section id="Problem-Definition">
<h2>Problem Definition<a class="headerlink" href="#Problem-Definition" title="Link to this heading"></a></h2>
<p>We have a solar photovoltaic array and battery.</p>
<p>The sun shines (intermittently) and power flows. We need to meet a certain demand for power.</p>
<p>The problem is modeled using the resource task network (RTN) methodology as proposed in Pantelides, C.C., 1994, July. Unified frameworks for optimal process planning and scheduling. In Proceedings on the second conference on foundations of computer aided operations (pp. 253-274).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Prg</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;three quarters&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Resource-indices">
<h2>Resource indices<a class="headerlink" href="#Resource-indices" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">res_cons</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="s1">&#39;solar&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">res_dem</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="s1">&#39;power&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">res_stg</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="s1">&#39;charge&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">res</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">res_cons</span> <span class="o">|</span> <span class="n">p</span><span class="o">.</span><span class="n">res_dem</span> <span class="o">|</span> <span class="n">p</span><span class="o">.</span><span class="n">res_stg</span>
</pre></div>
</div>
</div>
</section>
<section id="Process-indices">
<h2>Process indices<a class="headerlink" href="#Process-indices" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">pro_var</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="s1">&#39;pv&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">pro_cer</span> <span class="o">=</span> <span class="n">I</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">,</span> <span class="s1">&#39;li_d&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">pro</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">pro_var</span> <span class="o">|</span> <span class="n">p</span><span class="o">.</span><span class="n">pro_cer</span>
<span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{pro} = \{ pv, li, li_d \}$</div></div>
</div>
</section>
<section id="Parameters">
<h2>Parameters<a class="headerlink" href="#Parameters" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">dm_fac</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;demand factor (variability)&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">pv_fac</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pv</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;intermittency factor for solar&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">demand</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">res_dem</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;nominal demand&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">capex</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span>
    <span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="p">[</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;capital expenditure for solar processes&#39;</span>
<span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">fopex</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;fixed operating expenditure&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">vopex</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;variable operating expenditure&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Variables">
<h2>Variables<a class="headerlink" href="#Variables" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">cap_p</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;nameplate production capacity&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">cap_s</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">res_stg</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;nameplate storage capacity&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">sell</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">res_dem</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;amount of power sold&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">res_cons</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;amount of solar consumed&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">inv</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">res_stg</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;charge inventory&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">prod</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;production capacity utilization&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ex_cap</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;capital expenditure&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ex_fop</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;fixed operating expenditure&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ex_vop</span> <span class="o">=</span> <span class="n">V</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s1">&#39;variable operating expenditure&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Decision-Constraints">
<h2>Decision Constraints<a class="headerlink" href="#Decision-Constraints" title="Link to this heading"></a></h2>
<p>These lend degrees of freedom to the model</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">con_capmax</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_p</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">200</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_capstg</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_s</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">charge</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">200</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_consmax</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">con</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">res_cons</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">200</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_sell</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">sell</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">p</span><span class="o">.</span><span class="n">dm_fac</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">demand</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Multiscale-Decision-Constraints">
<h2>Multiscale Decision Constraints<a class="headerlink" href="#Multiscale-Decision-Constraints" title="Link to this heading"></a></h2>
<p>Here the constraint LHS is index by quarter and the RHS by year.</p>
<p>Thus, temporally disparate phenomena (scheduling and capacity sizing) are modeled</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">con_pv</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pv</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="o">.</span><span class="n">pv_fac</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pv</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_p</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pv</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_pv</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [10]   -cap^{p}_{pv, y0} + prod_{pv, q0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [11]   -0.0 \cdot cap^{p}_{pv, y0} + prod_{pv, q1} \leq 0$</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [12]   -0.5 \cdot cap^{p}_{pv, y0} + prod_{pv, q2} \leq 0$</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">con_prod</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro_cer</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_p</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro_cer</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_inv</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">charge</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_s</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">charge</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Calculations">
<h2>Calculations<a class="headerlink" href="#Calculations" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">con_vopex</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ex_vop</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">vopex</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="nb">sum</span><span class="p">(</span>
    <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span>
<span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_capex</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ex_cap</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">capex</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_p</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_fopex</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">ex_fop</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">fopex</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">cap_p</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pro</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Balances">
<h2>Balances<a class="headerlink" href="#Balances" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">con_solar</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pv</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="n">con</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">solar</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_power</span> <span class="o">=</span> <span class="p">(</span>
    <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">pro_var</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">li</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">li_d</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">sell</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
    <span class="o">==</span> <span class="mi">0</span>
<span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">con_charge</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">li</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">prod</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">li_d</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
    <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">charge</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">charge</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">q</span><span class="p">)</span>
    <span class="o">==</span> <span class="mi">0</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Objective">
<h2>Objective<a class="headerlink" href="#Objective" title="Link to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">o</span> <span class="o">=</span> <span class="n">inf</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ex_cap</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ex_vop</span><span class="p">)</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">ex_fop</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
<section id="Display-Program">
<h2>Display Program<a class="headerlink" href="#Display-Program" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Mathematical Program for prog

---Index Sets---

</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{y} = \{ y0 \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{q} = \{ q0, q1, q2 \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{res^{cons}} = \{ solar \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{res^{dem}} = \{ power \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{res^{stg}} = \{ charge \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{res} = \{ solar, power, charge \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{pro^{var}} = \{ pv \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{pro^{cer}} = \{ li, li_d \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle \mathcal{pro} = \{ pv, li, li_d \}$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

---Such that---

Inequality Constraints:
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [0]   cap^{p}_{pv, y0} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [1]   cap^{p}_{li, y0} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [2]   cap^{p}_{li_d, y0} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [3]   cap^{s}_{charge, y0} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [4]   con_{solar, q0} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [5]   con_{solar, q1} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [6]   con_{solar, q2} - 200.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [7]   -sell_{power, q0} + 50.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [8]   -sell_{power, q1} + 100.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [9]   -sell_{power, q2} + 50.0 \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [10]   -cap^{p}_{pv, y0} + prod_{pv, q0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [11]   -0.0 \cdot cap^{p}_{pv, y0} + prod_{pv, q1} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [12]   -0.5 \cdot cap^{p}_{pv, y0} + prod_{pv, q2} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [13]   prod_{li, q0} - cap^{p}_{li, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [14]   prod_{li, q1} - cap^{p}_{li, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [15]   prod_{li, q2} - cap^{p}_{li, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [16]   prod_{li_d, q0} - cap^{p}_{li_d, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [17]   prod_{li_d, q1} - cap^{p}_{li_d, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [18]   prod_{li_d, q2} - cap^{p}_{li_d, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [19]   inv_{charge, q0} - cap^{s}_{charge, y0} \leq 0$</div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [20]   inv_{charge, q1} - cap^{s}_{charge, y0} \leq 0$</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="math notranslate nohighlight">
$\displaystyle [21]   inv_{charge, q2} - cap^{s}_{charge, y0} \leq 0$</div></div>
</div>
</section>
<section id="Solution">
<h2>Solution<a class="headerlink" href="#Solution" title="Link to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">opt</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Read MPS format model from file prog.mps
Reading time = 0.00 seconds
PROG: 40 rows, 31 columns, 81 nonzeros
Gurobi Optimizer version 12.0.1 build v12.0.1rc0 (win64 - Windows 11.0 (26100.2))

CPU model: 13th Gen Intel(R) Core(TM) i7-13700, instruction set [SSE2|AVX|AVX2]
Thread count: 16 physical cores, 24 logical processors, using up to 24 threads

Optimize a model with 40 rows, 31 columns and 81 nonzeros
Model fingerprint: 0x1ce81a32
Coefficient statistics:
  Matrix range     [5e-01, 5e+03]
  Objective range  [1e+00, 1e+00]
  Bounds range     [0e+00, 0e+00]
  RHS range        [5e+01, 2e+02]
Presolve removed 30 rows and 20 columns
Presolve time: 0.00s
Presolved: 10 rows, 11 columns, 25 nonzeros

Iteration    Objective       Primal Inf.    Dual Inf.      Time
       0    4.9949000e+02   3.748738e+01   0.000000e+00      0s
       8    9.4200000e+05   0.000000e+00   0.000000e+00      0s

Solved in 8 iterations and 0.01 seconds (0.00 work units)
Optimal objective  9.420000000e+05
</pre></div></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/gana-logo.png" alt="Logo of gana"/>
            </a></p>
<h1 class="logo"><a href="../index.html">gana</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Example Implementation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sets.html">Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Index Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameter Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Variable Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="thetas.html">Parameteric Variable Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="diet.html">Diet Problem</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Multiscale Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Problem-Definition">Problem Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Resource-indices">Resource indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Process-indices">Process indices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Variables">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Decision-Constraints">Decision Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Multiscale-Decision-Constraints">Multiscale Decision Constraints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Calculations">Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Balances">Balances</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Objective">Objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Display-Program">Display Program</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Solution">Solution</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="diet.html" title="previous chapter">Diet Problem</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Rahul Kakodkar.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/examples/multiscale.ipynb.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>